# 作用域链：V8 是如何查找变量的?

> 作用域链就是将一个个作用域串起来，实现变量查找的路径。

作用域就是存放变量和函数的地方，全局环境有全局作用域，全局作用域中存放了全局变量和全局函数。

每个函数也有自己的作用域，函数作用域中存放了函数中定义的变量。

当在函数内部使用一个变量的时候，V8 便会去作用域中去查找。我们通过一段在函数内部查找变量的代码来具体看一下：

```js
var name = "极客时间";
var type = "global";

function foo() {
  var name = "foo";
  console.log(name);
  console.log(type);
}

function bar() {
  var name = "bar";
  var type = "function";
  foo();
}
bar();
```

## 什么是函数作用域和全局作用域？

每个函数在执行时都需要查找自己的作用域，我们称为函数作用域，在执行阶段，在执行一个函数时，当该函数需要使用某个变量或者调用了某个函数时，便会优先在该函数作用域中查找相关内容，如果在当前函数作用域中没有查找到变量，那么 V8 会去全局作用域中去查找，这个查找的线路就称为作用域链。

全局作用域和函数作用域类似，也是存放变量和函数的地方，但是它们还是有点`不一样`： 全局作用域是在 V8 启动过程中就创建了，且一直保存在内存中不会被销毁的，直至 V8 退出。 而函数作用域是在执行该函数时创建的，当函数执行结束之后，函数作用域就随之被销毁掉了。

## 作用域链是怎么工作的？

因为 JavaScript 是基于`词法作用域`的，词法作用域就是指，查找作用域的顺序是按照函数定义时的位置来决定的。

因为词法作用域是根据函数在代码中的位置来确定的，作用域是在声明函数时就确定好的了，所以我们也将词法作用域称为静态作用域。

和静态作用域相对的是动态作用域，动态作用域并不关心函数和作用域是如何声明以及在何处声明的，只关心它们从何处调用。换句话说，动态作用域是基于调用栈的，而不是基于函数定义的位置的。
